---
artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
from: quay.io/cilium/hubble-ui:v0.12.1@sha256:e15af59a2ded739e420be82de6cbdd0ce22f8d3f00e3a10b3d2d2734e074a394
---
image: {{ $.ModuleName }}/{{ $.ImageName }}
from: {{ $.Images.BASE_NGINX_ALPINE }}
import:
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /etc/nginx/conf.d/default.conf
  to: /etc/nginx/conf.d/default.conf
  before: install
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /app
  to: /app
  before: install
docker:
  ENTRYPOINT: ["nginx", "-g", "daemon off;"]
---
image: {{ $.ModuleName }}/{{ $.ImageName }}-distroless
fromImage: common/nginx-static
import:
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /etc/nginx/conf.d/default.conf
  to: /opt/nginx-static/conf/nginx.conf
  before: install
- artifact: {{ $.ModuleName }}/{{ $.ImageName }}-artifact
  add: /app
  to: /app
  before: install
docker:
  ENTRYPOINT: [ "/opt/nginx-static/sbin/nginx", "-g", "daemon off;" ]
